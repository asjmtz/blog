<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> React 图表框架的调查笔记 · ASJMTZ's Blog</title><meta name="description" content="React 图表框架的调查笔记 - ASJMTZ"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://iamtutu.com/atom.xml" title="ASJMTZ's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/asjmtz" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">React 图表框架的调查笔记</h1><div class="post-info">Nov 23, 2016</div><div class="post-content"><p>一些 react 图表绘制框架的调查<br><a id="more"></a></p>
<blockquote>
<p>想到不久后 react 项目中可能将会遇到一些绘制图表的数据可视化的需要，让我来小小调查一番，面对疾风吧。</p>
</blockquote>
<p>Google + Github 了一番，综合相关库的健康状态——维护和人气，我选出下面几个高富帅（人气高，图形丰富，<del>我觉得帅</del>）。并分别用他们来实现一个图表 demo。</p>
<h2 id="1-recharts"><a href="#1-recharts" class="headerlink" title="1. recharts"></a>1. <a href="https://github.com/recharts/recharts" target="_blank" rel="external">recharts</a></h2><h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>此库应该是我目前所知道最火的 react 图形库之一，在写这篇笔记时，他的 star 已将近 4000。乍一看全是英文的文档，实际上他是 ALIBABA 的团队开源的（GOOD)。 他的核心库为著名的 D3，也就是说<br>这是由 SVG 绘制的图形，天然的矢量图形。</p>
<p><img src="http://7jpqdg.com1.z0.glb.clouddn.com/rechart-3.jpg" alt="rechart-desc"></p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>API 组成形式是将图表的元素分解为灵活的组件，可以生成多种自定义图形</li>
<li>在图表组件中可以嵌入 SVG <code>&lt;defs/&gt;</code> ，来使用渐变、滤镜等 SVG 的特效 </li>
<li>文档比较完整</li>
</ul>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>实时数据下，频繁更新 DOM 的时候，可能会造成性能的问题</li>
</ul>
<h4 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> RechartsDemo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">	<span class="keyword">const</span> data = [</div><div class="line">		&#123; <span class="attr">name</span>: <span class="string">'uv1'</span>, <span class="attr">uv</span>: <span class="number">20</span>, <span class="attr">pv</span>: <span class="number">40</span> &#125;,</div><div class="line">		&#123; <span class="attr">name</span>: <span class="string">'uv2'</span>, <span class="attr">uv</span>: <span class="number">60</span>, <span class="attr">pv</span>: <span class="number">20</span> &#125;,</div><div class="line">		&#123; <span class="attr">name</span>: <span class="string">'uv3'</span>, <span class="attr">uv</span>: <span class="number">30</span>, <span class="attr">pv</span>: <span class="number">80</span> &#125;,</div><div class="line">		<span class="comment">// &#123; name: 'pv', value: 50 &#125;,</span></div><div class="line">		<span class="comment">// &#123; name: 'pv', value: 20 &#125;,</span></div><div class="line">	]</div><div class="line">	<span class="keyword">return</span> (</div><div class="line">		&lt;div style=&#123;&#123;height: 300&#125;&#125;&gt;</div><div class="line">			&lt;ResponsiveContainer &gt;</div><div class="line">			 	&lt;ComposedChart width=&#123;500&#125; height=&#123;300&#125; data=&#123;data&#125;&gt;</div><div class="line">			 		&lt;defs&gt;</div><div class="line">					    &lt;linearGradient id="colorUv" x1="0" y1="0" x2="0" y2="1"&gt;</div><div class="line">					      &lt;stop offset="5%" stopColor="#8884d8" stopOpacity=&#123;0.8&#125;/&gt;</div><div class="line">					      &lt;stop offset="95%" stopColor="#8884d8" stopOpacity=&#123;0&#125;/&gt;</div><div class="line">					    &lt;/linearGradient&gt;</div><div class="line">					&lt;/defs&gt;</div><div class="line">				    &lt;XAxis dataKey="name"/&gt;</div><div class="line">				    &lt;YAxis/&gt;</div><div class="line">				    &lt;CartesianGrid stroke="#eee" strokeDasharray="5 5"/&gt;</div><div class="line">				    &lt;Tooltip /&gt;</div><div class="line">				    &lt;Legend /&gt;</div><div class="line">				    &lt;Area type="monotone" dataKey="uv" stroke="#8884d8" fillOpacity=&#123;1&#125; fill="url(#colorUv)"/&gt;</div><div class="line">			    	&lt;Line type="monotone" dataKey="pv" stroke="#ff7000"/&gt;</div><div class="line">			  	&lt;/ComposedChart&gt;</div><div class="line"></div><div class="line">			&lt;/ResponsiveContainer&gt;</div><div class="line"></div><div class="line">		&lt;/div&gt;</div><div class="line">	)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://7jpqdg.com1.z0.glb.clouddn.com/rechart-demo.jpg" alt="rechart-demo"><br><!-- <script async src="//jsfiddle.net/5j2799j4/2/embed/js,result/"></script> --></p>
<h2 id="2-react-chartjs"><a href="#2-react-chartjs" class="headerlink" title="2. react-chartjs"></a>2. <a href="https://github.com/reactjs/react-chartjs" target="_blank" rel="external">react-chartjs</a></h2><h4 id="背景-1"><a href="#背景-1" class="headerlink" title="背景"></a>背景</h4><p>光看他的名字——reactjs/react-chartjs，就知此库背景不简单，出自的 react 官方社区之手，核心库为以轻量和漂亮著称的图形库大家 Chart.js。</p>
<p><img src="http://7jpqdg.com1.z0.glb.clouddn.com/react-chartjs.jpg" alt="react-chartjs"></p>
<h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><ul>
<li>他的图表渲染由 Canvas 实现，继承了 Canvas 绘图的优点，在大数据量时性能比 SVG 绘图要好。</li>
<li>体积比 recharts 小</li>
<li>只把 Chart.js 的顶级图表，简单地封装为 react 组件，参数完全可照搬。（各种意义上的方便）</li>
</ul>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>更新活跃度不高（？最后看到是九月份时的更新，大神们不是挖完坑就跑了吧？）</li>
<li>依赖 Chart.js@1.1.1，而最新版为 Chart.js@2.4.0，并且官网上是 v2 的文档。<br>所以 Chart.js 官网推荐使用这两个包 <a href="https://github.com/topdmc/react-chartjs2" target="_blank" rel="external">react-chartjs2</a> &amp; <a href="https://github.com/gor181/react-chartjs-2" target="_blank" rel="external">react-chartjs-2</a><br>（为什么在我翻完这么长的文档才发现，鞠了一把老泪）</li>
</ul>
<div class="tip"><br>    此处有坑<br></div>

<h4 id="Demo-react-chartjs-2"><a href="#Demo-react-chartjs-2" class="headerlink" title="Demo ( react-chartjs-2 )"></a>Demo ( react-chartjs-2 )</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> doughnutData = &#123;</div><div class="line">    <span class="attr">labels</span>: [</div><div class="line">        <span class="string">"Red"</span>,</div><div class="line">        <span class="string">"Blue"</span>,</div><div class="line">        <span class="string">"Yellow"</span></div><div class="line">    ],</div><div class="line">    <span class="attr">datasets</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">data</span>: [<span class="number">300</span>, <span class="number">50</span>, <span class="number">100</span>],</div><div class="line">            <span class="attr">backgroundColor</span>: [</div><div class="line">                <span class="string">"#FF6384"</span>,</div><div class="line">                <span class="string">"#36A2EB"</span>,</div><div class="line">                <span class="string">"#FFCE56"</span></div><div class="line">            ],</div><div class="line">            <span class="attr">hoverBackgroundColor</span>: [</div><div class="line">                <span class="string">"#FF6384"</span>,</div><div class="line">                <span class="string">"#36A2EB"</span>,</div><div class="line">                <span class="string">"#FFCE56"</span></div><div class="line">            ]</div><div class="line">        &#125;]</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> ChartJSDemo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line"></div><div class="line">	<span class="keyword">return</span>(</div><div class="line">		&lt;div&gt;</div><div class="line">			&lt;Doughnut data=&#123;doughnutData&#125;/&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line"></div><div class="line">	)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://7jpqdg.com1.z0.glb.clouddn.com/react-chartjs-2.jpg" alt="react-chartjs-2"></p>
<h2 id="3-victory"><a href="#3-victory" class="headerlink" title="3. victory"></a>3. <a href="https://github.com/FormidableLabs/victory" target="_blank" rel="external">victory</a></h2><h4 id="背景-2"><a href="#背景-2" class="headerlink" title="背景"></a>背景</h4><p>Victory 为了构建可交互的数据可视化的一组 react 组件，他的组件类型是这三个库中最丰富的，由 SVG 实现底层图形。使用他也可以高度自定义化你的图表，他还有个兄弟库 victory-native，可以用在 react-native 项目中。</p>
<p><img src="http://7jpqdg.com1.z0.glb.clouddn.com/victory-1.jpg" alt="victory-desc"></p>
<h4 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h4><ul>
<li>类型多，很强大</li>
<li>可灵活的定制化图形</li>
<li>支持 native</li>
<li>平滑的动态更新</li>
<li>文档全面</li>
</ul>
<h4 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>寂寞</li>
</ul>
<h4 id="Demo-1"><a href="#Demo-1" class="headerlink" title="Demo"></a>Demo</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> VictoryDemo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">	<span class="keyword">const</span> data = [</div><div class="line"> 		&#123;<span class="attr">quarter</span>: <span class="number">1</span>, <span class="attr">earnings</span>: <span class="number">13000</span>&#125;,</div><div class="line">  		&#123;<span class="attr">quarter</span>: <span class="number">2</span>, <span class="attr">earnings</span>: <span class="number">16500</span>&#125;,</div><div class="line">  		&#123;<span class="attr">quarter</span>: <span class="number">3</span>, <span class="attr">earnings</span>: <span class="number">14250</span>&#125;,</div><div class="line">  		&#123;<span class="attr">quarter</span>: <span class="number">4</span>, <span class="attr">earnings</span>: <span class="number">19000</span>&#125;		</div><div class="line">	]</div><div class="line">	<span class="keyword">return</span> (</div><div class="line">		&lt;VictoryChart domainPadding=&#123;20&#125;&gt;</div><div class="line">	        &lt;VictoryAxis</div><div class="line">	          // tickValues specifies both the number of ticks and where</div><div class="line">	          // they are placed on the axis</div><div class="line">	          tickValues=&#123;["Quarter 1", "Quarter 2", "Quarter 3", "Quarter 4"]&#125;/&gt;</div><div class="line">	        &lt;VictoryAxis</div><div class="line">	          dependentAxis</div><div class="line">	          // tickFormat specifies how ticks should be displayed</div><div class="line">	          tickFormat=&#123;(x) =&gt; (`$$&#123;x / 1000&#125;k`)&#125; /&gt;</div><div class="line">	        &lt;VictoryBar</div><div class="line">	        	data=&#123;data&#125;</div><div class="line">	        	x="quarter"</div><div class="line">	        	y="earnings"/&gt;</div><div class="line">        &lt;/VictoryChart&gt;</div><div class="line">    )</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://7jpqdg.com1.z0.glb.clouddn.com/QQ20161123-15.png" alt="victory-demo"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2></div></article></div></section><footer><div class="paginator"><a href="/2016/12/06/thinking-of-css-design-pattern-1-structuring/" class="prev">上一篇</a><a href="/2016/03/29/git-howto-revert-a-commit-already-pushed-to-a-remote-reposit/" class="next">下一篇</a></div><div class="copyright"><p>© 2016 - 2017 <a href="http://iamtutu.com">ASJMTZ</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>