<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Grunt 常用插件 · ASJMTZ's Blog</title><meta name="description" content="Grunt 常用插件 - ASJMTZ"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://iamtutu.com/atom.xml" title="ASJMTZ's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/asjmtz" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Grunt 常用插件</h1><div class="post-info">Jun 24, 2014</div><div class="post-content"><p><a href="http://www.tuicool.com/articles/zQ7jmm" target="_blank" rel="external">《Grunt.js 在前端项目中的实战》</a>文章的实战部分也有介绍一些常用的插件<br><a href="https://github.com/gruntjs" target="_blank" rel="external">grunt插件in Github</a></p>
<p>##前期准备<br>通过<a href="http://www.gruntjs.net/docs/sample-gruntfile/" target="_blank" rel="external">grunt中文网</a>上的案例，memo一下常用的grunt插件的使用<br>首先从<code>package.json</code>文件读入配置信息，并存入<code>pkg</code>属性内。这样就可以让我们访问到 <code>package.json</code> 文件中列出的属性了，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">module.exports = function(grunt) &#123;</div><div class="line">  grunt.initConfig(&#123;</div><div class="line">    pkg: grunt.file.readJSON(&apos;package.json&apos;)</div><div class="line">  &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>##grunt-contrib-concat【合并文件】</p>
<p>###代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">concat: &#123;</div><div class="line">  options: &#123;</div><div class="line">    // 定义一个用于插入合并输出文件之间的字符</div><div class="line">    separator: &apos;;&apos;</div><div class="line">  &#125;,</div><div class="line">  dist: &#123;</div><div class="line">    // 将要被合并的文件</div><div class="line">    src: [&apos;src/**/*.js&apos;],</div><div class="line">    // 合并后的JS文件的存放位置</div><div class="line">    dest: &apos;dist/&lt;%= pkg.name %&gt;.js&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###说明<br>Grunt自带的有一个简单的模板引擎用于输出配置对象的属性值(这里是指 <code>package.json</code> 中的配置对象)。这里是让<code>concat</code>任务将所有存在于<code>src/</code>目录下以<code>.js</code>结尾的文件合并起来，然后存储在<code>dist</code>目录中，并以项目名 <code>package.json</code> 来命名。</p>
<p>##grunt-contrib-uglify【压缩JS】</p>
<p>###代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">uglify: &#123;</div><div class="line">  options: &#123;</div><div class="line">    // 此处定义的banner注释将插入到输出文件的顶部</div><div class="line">    banner: &apos;/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today(&quot;dd-mm-yyyy&quot;) %&gt; */\n&apos;</div><div class="line">  &#125;,</div><div class="line">  dist: &#123;</div><div class="line">    files: &#123;</div><div class="line">      &apos;dist/&lt;%= pkg.name %&gt;.min.js&apos;: [&apos;&lt;%= concat.dist.dest %&gt;&apos;]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###说明<br>上面是配置uglify插件的代码，它的作用是压缩（minify）JavaScript文件。</p>
<p>这里我们让<code>uglify</code>在<code>dist/</code>目录中创建了一个包含压缩结果的JavaScript文件。注意这里我使用了 <code>&lt;%= concat.dist.dest %&gt;</code>，因此 <code>uglify</code> 会自动压缩 <code>concat</code> 任务中生成的文件。</p>
<p>###扩展</p>
<ul>
<li>这里可以用 <code>concat.attr</code> 这种写法取到 <code>contact</code>配置的值，是不是说明在<code>grunt.initConfig({})</code>声明的属性,可以使用比自己先声明的配置的属性呢？<br>或是后声明的也能取到值呢？</li>
<li>这里可以交换顺序试一试</li>
</ul>
<p>##grunt-contrib-cssmin【压缩JS】</p>
<p>###代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//压缩成为一个css</div><div class="line">cssmin: &#123;</div><div class="line">  options: &#123;</div><div class="line">    // 此处定义的banner注释将插入到输出文件的顶部</div><div class="line">    banner: &apos;/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today(&quot;dd-mm-yyyy&quot;) %&gt; */\n&apos;</div><div class="line">  &#125;,</div><div class="line">  dist: &#123;</div><div class="line">    files: &#123;</div><div class="line">      &apos;dist/&lt;%= pkg.name %&gt;.min.css&apos;: [&apos;&lt;%= path/to/**/*.css  %&gt;&apos;]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//每个分别压</div><div class="line">cssmin: &#123;</div><div class="line">  minify: &#123;</div><div class="line">    expand: true,</div><div class="line">    cwd: &apos;release/css/&apos;,</div><div class="line">    src: [&apos;*.css&apos;, &apos;!*.min.css&apos;],</div><div class="line">    dest: &apos;release/css/&apos;,</div><div class="line">    ext: &apos;.min.css&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###说明<br>压缩CSS文件</p>
<p>##grunt-contrib-imagemin【压缩图片】</p>
<p>###代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">imagemin: &#123;                          // Task</div><div class="line">  static: &#123;                          // Target</div><div class="line">    options: &#123;                       // Target options</div><div class="line">      optimizationLevel: 3,</div><div class="line">      use: [mozjpeg()]</div><div class="line">    &#125;,</div><div class="line">    files: &#123;                         // Dictionary of files</div><div class="line">      &apos;dist/img.png&apos;: &apos;src/img.png&apos;, // &apos;destination&apos;: &apos;source&apos;</div><div class="line">      &apos;dist/img.jpg&apos;: &apos;src/img.jpg&apos;,</div><div class="line">      &apos;dist/img.gif&apos;: &apos;src/img.gif&apos;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  dynamic: &#123;                         // Another target</div><div class="line">    files: [&#123;</div><div class="line">      expand: true,                  // Enable dynamic expansion</div><div class="line">      cwd: &apos;src/&apos;,                   // Src matches are relative to this path</div><div class="line">      src: [&apos;**/*.&#123;png,jpg,gif&#125;&apos;],   // Actual patterns to match</div><div class="line">      dest: &apos;dist/&apos;                  // Destination path prefix</div><div class="line">    &#125;]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###说明<br>压缩图片，对图片进行优化处理，根据以下几个优化器</p>
<ul>
<li><a href="https://github.com/kevva/imagemin-gifsicle" target="_blank" rel="external">gifsicle</a> — Compress GIF images</li>
<li><a href="https://github.com/kevva/imagemin-jpegtran" target="_blank" rel="external">jpegtran</a> — Compress JPEG images</li>
<li><a href="https://github.com/kevva/imagemin-optipng" target="_blank" rel="external">optipng</a> — Compress PNG images</li>
<li><a href="https://github.com/kevva/imagemin-svgo" target="_blank" rel="external">svgo</a> — Compress SVG images</li>
</ul>
<p>##grunt-contrib-qunit【测试任务】</p>
<p>###代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">qunit: &#123;</div><div class="line">  files: [&apos;test/**/*.html&apos;]</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>###说明<br>QUnit插件的设置非常简单。 你只需要给它提供用于测试运行的文件的位置，注意这里的QUnit是运行在HTML文件上的</p>
<p>###扩展<br>他是<code>jQuery</code>家族的一员</p>
<blockquote>
<p>QUnit is a powerful, easy-to-use JavaScript unit testing framework. It’s used by the jQuery, jQuery UI and jQuery Mobile projects and is capable of testing any generic JavaScript code, including itself!</p>
</blockquote>
<p>测试框架也没有常用过，详细的另外写个memo，叫做《JA Unit Testing学习笔记》吧！</p>
<p>##grunt-contrib-jshint</p>
<p>###代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">jshint: &#123;</div><div class="line">  // define the files to lint</div><div class="line">  files: [&apos;gruntfile.js&apos;, &apos;src/**/*.js&apos;, &apos;test/**/*.js&apos;],</div><div class="line">  // configure JSHint (documented at http://www.jshint.com/docs/)</div><div class="line">  options: &#123;</div><div class="line">      // more options here if you want to override JSHint defaults</div><div class="line">    globals: &#123;</div><div class="line">      jQuery: true,</div><div class="line">      console: true,</div><div class="line">      module: true</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###说明<br><a href="http://www.jshint.com/docs/" target="_blank" rel="external">Jshint</a>是一个JS代码书写风格检测器，具体的在线<a href="http://www.jshint.com/" target="_blank" rel="external">demo</a>,使用一些参数可以让Jhint用某种规则来检测你的代码。</p>
<p>###扩展<br><a href="http://www.iteye.com/news/28028-JavaScript-code-style-guide" target="_blank" rel="external">《一些达成共识的JavaScript编码风格约定》</a><br><a href="http://zhang.zipeng.info/vimwiki/Entries/Reference/Tools/jshint.html" target="_blank" rel="external">《JSHint 使用说明》</a></p>
<p>##grunt-contrib-watch</p>
<p>###代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">watch: &#123;</div><div class="line">  files: [&apos;&lt;%= jshint.files %&gt;&apos;],</div><div class="line">  tasks: [&apos;jshint&apos;, &apos;qunit&apos;]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###说明<br><code>grunt-contrib-watch</code> 是开发必备插件，用来监控文件的修改，然后自动运行<code>grunt</code>任务，省去一遍遍手动执行Grunt命令，</p>
<p>###扩展<br><a href="http://www.tuicool.com/articles/zQ7jmm" target="_blank" rel="external">《Grunt.js 在前端项目中的实战》</a>文章的实战部分也有介绍一些常用的插件</p>
<p>##结语<br>整个实例请看<a href="http://www.gruntjs.net/docs/sample-gruntfile/" target="_blank" rel="external">grunt中文网</a>这个网页</p>
</div></article></div></section><footer><div class="paginator"><a href="/2014/06/25/0625-grunt 项目架设/" class="prev">上一篇</a><a href="/2014/06/24/0624-JS Unit Testing/" class="next">下一篇</a></div><div class="copyright"><p>© 2016 - 2017 <a href="http://iamtutu.com">ASJMTZ</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>