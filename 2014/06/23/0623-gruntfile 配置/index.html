<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Grunt 配置文件 · ASJMTZ's Blog</title><meta name="description" content="Grunt 配置文件 - ASJMTZ"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://iamtutu.com/atom.xml" title="ASJMTZ's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/asjmtz" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Grunt 配置文件</h1><div class="post-info">Jun 23, 2014</div><div class="post-content"><p>##Grunt配置<br>Grunt的task配置都是在 <code>gruntfile</code> 中的 <code>grunt.initConfig</code> 方法中指定的。此配置主要是以任务名称命名的属性，也可以包含其他任意数据。一旦这些代表任意数据的属性与任务所需要的属性相冲突，就将被忽略。</p>
<p>此外，由于这本身就是JavaScript，因此你不仅限于使用JSON；你可以在这里使用任何有效的JavaScript。必要的情况下，你甚至可以以编程的方式生成配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">grunt.initConfig(&#123;</div><div class="line">  concat: &#123;</div><div class="line">    // 这里是concat任务的配置信息。</div><div class="line">  &#125;,</div><div class="line">  uglify: &#123;</div><div class="line">    // 这里是uglify任务的配置信息</div><div class="line">  &#125;,</div><div class="line">  // 任意数据。</div><div class="line">  my_property: &apos;whatever&apos;,</div><div class="line">  my_src_files: [&apos;foo/*.js&apos;, &apos;bar/*.js&apos;],</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>##文件</p>
<p>由于大多的任务都是执行文件操作，Grunt有一个强大的抽象层用于声明任务应该操作哪些文件。这里有好几种定义<strong>src-dest</strong>(源文件-目标文件)文件映射的方式，均提供了不同程度的描述和控制操作方式。任何一种多任务（multi-task）都能理解下面的格式，所以你只需要选择满足你需求的格式就行。</p>
<p>所有的文件格式都支持 <code>src</code> 和 <code>dest</code> 属性，此外”Compact”[简洁]和”Files Array”[文件数组]格式还支持以下一些额外的属性：</p>
<ul>
<li><code>filter</code> 它通过接受任意一个有效的<a href="http://nodejs.org/docs/latest/api/fs.html#fs_class_fs_stats" target="_blank" rel="external">fs.Stats方法名</a>或者一个函数来匹配 <code>src</code> 文件路径并根据匹配结果返回true或者false。</li>
<li><code>nonull</code> 如果被设置为 true，未匹配的模式也将执行。结合Grunt的<code>--verbore</code>标志, 这个选项可以帮助用来调试文件路径的问题。</li>
<li><code>dot</code> 它允许模式模式匹配句点开头的文件名，即使模式并不明确文件名开头部分是否有句点。</li>
<li><code>matchBase</code> 如果设置这个属性，缺少斜线的模式(意味着模式中不能使用斜线进行文件路径的匹配)将不会匹配包含在斜线中的文件名。 例如，a?b将匹配<code>/xyz/123/acb</code>但不匹配 <code>/xyz/acb/123</code> 。</li>
<li><code>expand</code> 处理动态的<code>src-dest</code>文件映射，更多的信息请查看<strong>动态构建文件对象</strong>。<br>其他的属性将作为匹配项传递给底层的库。 请查看<a href="https://github.com/isaacs/node-glob" target="_blank" rel="external">node-glob</a> 和<a href="https://github.com/isaacs/minimatch" target="_blank" rel="external">minimatch</a> 文档以获取更多信息。</li>
</ul>
<h2 id="文件配置"><a href="#文件配置" class="headerlink" title="文件配置"></a>文件配置</h2><p>###<strong>Files - 通配符</strong></p>
<ul>
<li><code>*</code> 匹配任何字符，除了 <code>/</code></li>
<li><code>?</code> 匹配任何字符，除了 <code>/</code></li>
<li><code>**</code> 匹配任何字符，包括 <code>/</code>，所以用在目录的路径里面</li>
<li><code>{}</code> 逗号分割的“或”操作（逗号后面不要有空格）</li>
<li><code>!</code> 排除某个匹配<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//所有th开头的js文件</div><div class="line">&#123; src: &apos;foo/th*.js&apos;, dest: ... &#125;</div><div class="line"></div><div class="line">//所有a或b开头的js文件</div><div class="line">&#123; src: &apos;foo/&#123;a,b&#125;*.js&apos;, dest: ... &#125;</div><div class="line">//也可以分开写成这样</div><div class="line">&#123; src: [&apos;foo/a*.js&apos;, &apos;foo/b*.js&apos;], dest: ... &#125;</div><div class="line"></div><div class="line">//所有的js文件</div><div class="line">&#123; src: &apos;foo/*.js&apos;, dest: ... &#125;</div><div class="line"></div><div class="line">//所有的js文件,除了bar.js</div><div class="line">&#123; src: [&apos;foo/*.js&apos;,&apos;!foo/bar.js&apos;], dest: ... &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>###Files - 简洁格式 - Compact Format<br>每个target只能指定一对 <code>src-dest</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">grunt.initConfig(&#123;</div><div class="line">  jshint: &#123;</div><div class="line">    foo: &#123;</div><div class="line">      src: [&apos;src/aa.js&apos;, &apos;src/aaa.js&apos;]</div><div class="line">    &#125;,</div><div class="line">  &#125;,</div><div class="line">  concat: &#123;</div><div class="line">    bar: &#123;</div><div class="line">      src: [&apos;src/bb.js&apos;, &apos;src/bbb.js&apos;],</div><div class="line">      dest: &apos;dest/b.js&apos;,</div><div class="line">    &#125;,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>###Files - 文件对象格式 - Files Object Format<br>每个目标对应多个<code>src-dest</code>形式的文件映射，属性名就是目标文件，源文件就是它的值(源文件列表则使用数组格式声明)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">grunt.initConfig(&#123;</div><div class="line">  concat: &#123;</div><div class="line">    foo: &#123;</div><div class="line">      files: &#123;</div><div class="line">        &apos;dest/a.js&apos;: [&apos;src/aa.js&apos;, &apos;src/aaa.js&apos;],</div><div class="line">        &apos;dest/a1.js&apos;: [&apos;src/aa1.js&apos;, &apos;src/aaa1.js&apos;],</div><div class="line">      &#125;,</div><div class="line">    &#125;,</div><div class="line">    bar: &#123;</div><div class="line">      files: &#123;</div><div class="line">        &apos;dest/b.js&apos;: [&apos;src/bb.js&apos;, &apos;src/bbb.js&apos;],</div><div class="line">        &apos;dest/b1.js&apos;: [&apos;src/bb1.js&apos;, &apos;src/bbb1.js&apos;],</div><div class="line">      &#125;,</div><div class="line">    &#125;,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>###Files - 文件数组格式 - Files Array Format<br>支持每个目标对应多个<code>src-dest</code>文件映射，同时也允许每个映射拥有<strong>额外</strong>属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">grunt.initConfig(&#123;</div><div class="line">   concat: &#123;</div><div class="line">    foo: &#123;</div><div class="line">      files: [</div><div class="line">        &#123;src: [&apos;src/aa.js&apos;, &apos;src/aaa.js&apos;], dest: &apos;dest/a.js&apos;&#125;,</div><div class="line">        &#123;src: [&apos;src/aa1.js&apos;, &apos;src/aaa1.js&apos;], dest: &apos;dest/a1.js&apos;&#125;,</div><div class="line">      ],</div><div class="line">    &#125;,</div><div class="line">    bar: &#123;</div><div class="line">      files: [</div><div class="line">        &#123;src: [&apos;src/bb.js&apos;, &apos;src/bbb.js&apos;], dest: &apos;dest/b/&apos;, nonull: true&#125;,</div><div class="line">        &#123;src: [&apos;src/bb1.js&apos;, &apos;src/bbb1.js&apos;], dest: &apos;dest/b1/&apos;, filter: &apos;isFile&apos;&#125;,</div><div class="line">      ],</div><div class="line">    &#125;,</div><div class="line">  &#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>##下面还有好多栗子在<a href="http://www.gruntjs.net/docs/configuring-tasks/" target="_blank" rel="external">这里</a>，不写了</p>
</div></article></div></section><footer><div class="paginator"><a href="/2014/06/24/0624-JS Unit Testing/" class="prev">上一篇</a><a href="/2014/06/23/0623-grunt/" class="next">下一篇</a></div><div class="copyright"><p>© 2016 - 2017 <a href="http://iamtutu.com">ASJMTZ</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>